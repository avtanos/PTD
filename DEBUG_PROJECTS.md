# Инструкция по отладке компонента Projects

## Проблема
Данные не отображаются на фронтенде, хотя API возвращает данные.

## Шаги для отладки

### 1. Откройте консоль браузера (F12)

### 2. Проверьте логи при загрузке страницы

Должны появиться следующие логи:
- `Projects: Запуск fetchData` - когда начинается загрузка
- `Projects: Запрос к API` - URL запроса
- `Projects: Ответ API получен` - формат ответа
- `Projects: Новый формат, загружено проектов: X` - количество загруженных проектов
- `Projects: Рендеринг компонента` - состояние при рендеринге
- `Projects: Состояние компонента` - текущее состояние

### 3. Проверьте Network tab

1. Откройте вкладку Network
2. Обновите страницу
3. Найдите запрос к `/api/v1/projects/`
4. Проверьте:
   - Статус ответа (должен быть 200)
   - Формат ответа (должен быть `{data: [...], meta: {...}}`)
   - Размер ответа

### 4. Проверьте возможные проблемы

#### Проблема 1: Данные не загружаются
**Симптомы:** Нет логов `Projects: Ответ API получен`
**Решение:** Проверьте:
- Работает ли бэкенд (`http://localhost:8000`)
- Правильно ли настроен proxy в `package.json`
- Нет ли ошибок CORS

#### Проблема 2: Данные загружаются, но не отображаются
**Симптомы:** Есть логи загрузки, но `projects.length === 0`
**Решение:** Проверьте логи:
- `Projects: Ответ API получен` - какой формат ответа?
- `Projects: Новый формат` или `Projects: Старый формат`?
- Если `Projects: Неожиданный формат ответа` - проверьте формат ответа API

#### Проблема 3: Данные в состоянии, но не рендерятся
**Симптомы:** `projects.length > 0`, но таблица пустая
**Решение:** Проверьте логи:
- `Projects: Рендеринг tbody` - сколько проектов рендерится?
- `Projects: Рендеринг проекта` - рендерятся ли отдельные проекты?
- Проверьте, нет ли ошибок в консоли

#### Проблема 4: Фильтры не работают
**Симптомы:** Изменение фильтров не обновляет данные
**Решение:** Проверьте логи:
- `Projects: Запуск fetchData` - вызывается ли при изменении фильтров?
- Проверьте параметры запроса в Network tab

#### Проблема 5: Пагинация не работает
**Симптомы:** Кнопки пагинации не работают
**Решение:** Проверьте:
- `totalPages` > 0?
- `currentPage` изменяется при клике?
- `Projects: Запуск fetchData` вызывается при изменении страницы?

## Быстрая проверка

Выполните в консоли браузера:
```javascript
// Проверка состояния компонента
console.log('Projects state:', {
  projects: window.__PROJECTS_STATE__ || 'State not exposed',
  // Или проверьте через React DevTools
});

// Проверка API напрямую
fetch('/api/v1/projects/?limit=5')
  .then(r => r.json())
  .then(d => console.log('API Response:', d));
```

## Ожидаемое поведение

1. При загрузке страницы:
   - Показывается "Загрузка..."
   - Выполняется запрос к API
   - Данные загружаются и отображаются в таблице

2. При изменении фильтров:
   - Страница сбрасывается на первую
   - Выполняется новый запрос с параметрами фильтров
   - Таблица обновляется

3. При изменении страницы:
   - Выполняется запрос с новыми параметрами skip/limit
   - Таблица обновляется

4. При создании/редактировании/удалении:
   - Показывается индикатор загрузки
   - Выполняется запрос
   - Данные обновляются

## Если ничего не помогает

1. Проверьте, что бэкенд возвращает данные в правильном формате:
   ```bash
   curl http://localhost:8000/api/v1/projects/?limit=2
   ```

2. Проверьте, что фронтенд получает данные:
   - Network tab → запрос к `/api/v1/projects/` → Response

3. Проверьте ошибки в консоли браузера

4. Проверьте ошибки в консоли бэкенда
